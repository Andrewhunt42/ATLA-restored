namespace = FORTUNE

character_event = {
	id = FORTUNE.1
	is_triggered_only = yes
	hide_window = yes
	only_independent = yes
	
	trigger = {
		always = yes
		is_save_game = no
	}
	
	immediate = {
		random_list = {
			10 = { set_variable = { which = global_world_luck value = 2 } }
			10 = { set_variable = { which = global_world_luck value = 3 } }
			10 = { set_variable = { which = global_world_luck value = 4 } }
			10 = { set_variable = { which = global_world_luck value = 5 } }
			10 = { set_variable = { which = global_world_luck value = 6 } }
			10 = { set_variable = { which = global_world_luck value = 7 } }
			10 = { set_variable = { which = global_world_luck value = 8 } }
		}
	}
	
	option = {
		if = {
			limit = {
				check_variable = { which = global_world_luck value >= 5 }
			}
			set_global_flag = global_world_luck_good
			clr_global_flag = global_world_luck_bad
		} else = {
			clr_global_flag = global_world_luck_good
			set_global_flag = global_world_luck_bad
		}
	}
}

letter_event = {
	id = FORTUNE.100
	is_triggered_only = yes
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_bad
			}
		}
		text = tell_fortune_0_bad
	}
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_good
			}
		}
		text = tell_fortune_0_good
	}
	
	option = {
		name = tell_fortune_response_0
		prestige = -50
		piety = -10
		
		FROM = {
			add_character_modifier = {
				name = had_fortune_told
				days = 730
			}
		}
	}
}

letter_event = {
	id = FORTUNE.101
	is_triggered_only = yes
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_bad
			}
		}
		text = tell_fortune_1_bad
	}
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_good
			}
		}
		text = tell_fortune_1_good
	}
	
	option = {
		name = tell_fortune_response_1

		FROM = {
			add_character_modifier = {
				name = had_fortune_told
				days = 730
			}
			opinion = {
				modifier = opinion_entertained_by_fortunetelling
				who = ROOT
			}
		}
	}
}

letter_event = {
	id = FORTUNE.102
	is_triggered_only = yes
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_bad
			}
		}
		text = tell_fortune_2_bad
	}
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_good
			}
		}
		text = tell_fortune_2_good
	}
	
	option = {
		name = tell_fortune_response_2
		FROM = {
			add_friend = ROOT
			add_character_modifier = {
				name = had_fortune_told
				days = 730
			}
		}
	}
}

letter_event = {
	id = FORTUNE.103
	is_triggered_only = yes
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_bad
			}
		}
		text = tell_fortune_3_bad
	}
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_good
			}
		}
		text = tell_fortune_3_good
	}
	
	option = {
		name = tell_fortune_response_3
		FROM = {
			add_friend = ROOT
			religion = ROOT
			add_character_modifier = {
				name = had_fortune_told
				days = 730
			}
		}
	}
}

letter_event = {
	id = FORTUNE.104
	is_triggered_only = yes
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_bad
			}
		}
		text = tell_fortune_4_bad
	}
	
	desc = {
		trigger = {
			ROOT = {
				has_character_flag = personal_luck_good
			
			}
		}
		text = tell_fortune_4_good
	}
	
	option = {
		name = tell_fortune_response_4
		FROM = {
			add_friend = ROOT
			religion = ROOT
			force_host = ROOT
			add_character_modifier = {
				name = had_fortune_told
				days = 730
			}
		}
	}
}