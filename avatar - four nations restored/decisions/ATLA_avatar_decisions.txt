decisions = {
	play_avatar = {
        is_high_prio = yes
		only_playable = yes
        ai = no
		potential = {
			is_avatar_trigger = no
            event_target:global_avatar = {
				is_avatar_trigger = yes
				ai = yes
            }
            has_global_flag = playable_avatar
		}
		allow = {
			always = yes
		}
		effect = {
			# find_avatar_effect = yes
            set_player_character = event_target:global_avatar
		}
		revoke_allowed = {
			always = no
		}
	}
}

targeted_decisions = {
	move_avatar = {
        is_high_prio = yes
		only_playable = yes
		filter = independent_rulers
        ai = no
		from_potential = {
			is_landed = no
			is_avatar_trigger = yes
		}
		potential = {
			is_within_diplo_range = FROM
			is_landed = yes
			# you're not already a tributary
			FROM = {
				NOR = {
					is_tributary = {
						type = unrevealed_avatar_tributary
						suzerain = PREVPREV
					}
					is_tributary = {
						type = avatar_tributary
						suzerain = PREVPREV
					}
				}
			}
		}
		allow = {
			opinion = {
				who = FROM
				value >= 0
			}
			FROM = {
				NOT = {
					trait = on_journey
				}
				NOR = {
					is_rival = ROOT
					is_foe = ROOT
				}		
			}
			OR = {
				FROM = {
					custom_tooltip = {
						text = has_flying_pet_or_artifact_tt
						has_flying_pet_or_artifact_trigger = yes
					}
				}
				ROOT = {
					capital_holding = {
						FROM = {
							location = {
								distance = {
									who = PREVPREV
									value <= 1000
								}
							}
						}
					}
				}
			}
		}
		effect = {
			custom_tooltip = {
				text = move_avatar_tt
				ROOT = {
					save_event_target_as = avatar_journey_target
				}
				FROM = {
					character_event = {
						id = new_avatar_journey.10
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
	}
}