decisions = {
	play_avatar = {
        is_high_prio = yes
		only_playable = yes
        ai = no
		potential = {
			is_avatar_trigger = no
            event_target:global_avatar = {
				is_avatar_trigger = yes
				ai = yes
            }
            has_global_flag = playable_avatar
		}
		allow = {
			always = yes
		}
		effect = {
			# find_avatar_effect = yes
            set_player_character = event_target:global_avatar
		}
		revoke_allowed = {
			always = no
		}
	}
}

targeted_decisions = {
	move_avatar = {
        is_high_prio = yes
		only_playable = yes
		filter = independent_rulers
        ai = no
		from_potential = {
			is_landed = no
			is_avatar_trigger = yes
		}
		potential = {
			is_within_diplo_range = FROM
			# you're not already a tributary
			FROM = {
				NOR = {
					is_tributary = {
						type = unrevealed_avatar_tributary
						suzerain = PREVPREV
					}
					is_tributary = {
						type = avatar_tributary
						suzerain = PREVPREV
					}
				}
			}
		}
		allow = {
			opinion = {
				who = FROM
				value >= 0
			}
			FROM = {
				NOR = {
					is_rival = ROOT
					is_foe = ROOT
				}		
			}
		}
		effect = {
			custom_tooltip = {
				text = move_avatar_tt
				find_avatar_effect = yes
				ROOT = {
					save_event_target_as = avatar_journey_target
					# move_avatar_effect = yes
				}
				if = { # a week
					limit = {
						ROOT = {
							capital_holding = {
								FROM = {
									location = {
										distance = {
											who = PREVPREV
											value >= 0
										}
										distance = {
											who = PREVPREV
											value <= 150
										}
									}
								}
							}
						}
					}
					FROM = {
						character_event = {
							id = new_avatar_journey.50
							days = 1
							random = 7
						}
					}
				}
				else_if = { # Few weeks
					limit = {
						ROOT = {
							capital_holding = {
								FROM = {
									location = {
										distance = {
											who = PREVPREV
											value >= 151
										}
										distance = {
											who = PREVPREV
											value <= 400
										}
									}
								}
							}
						}
					}
					FROM = {
						character_event = {
							id = new_avatar_journey.50
							days = 7
							random = 30
						}
					}
				}
				else_if = { # few months
					limit = {
						ROOT = {
							capital_holding = {
								FROM = {
									location = {
										distance = {
											who = PREVPREV
											value >= 401
										}
										distance = {
											who = PREVPREV
											value <= 650
										}
									}
								}
							}
						}
					}
					FROM = {
						character_event = {
							id = new_avatar_journey.50
							days = 30
							random = 60
						}
					}
				}
				else_if = { # months
					limit = {
						ROOT = {
							capital_holding = {
								FROM = {
									location = {
										distance = {
											who = PREVPREV
											value >= 650
										}
										distance = {
											who = PREVPREV
											value <= 1000
										}
									}
								}
							}
						}
					}
					FROM = {
						character_event = {
							id = new_avatar_journey.50
							days = 60
							random = 180
						}
					}
				}
				else_if = { # half a year
					limit = {
						ROOT = {
							capital_holding = {
								FROM = {
									location = {
										distance = {
											who = PREVPREV
											value >= 1001
										}
										distance = {
											who = PREVPREV
											value <= 1600
										}
									}
								}
							}
						}
					}
					FROM = {
						character_event = {
							id = new_avatar_journey.50
							days = 180
							random = 90
						}
					}
				}
			}
		}
		revoke_allowed = {
			always = no
		}
	}
}