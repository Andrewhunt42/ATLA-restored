###########################################
#                                         #
# ATLA Illness events		              #
#                                         #
#                                      	  #
#                                         #
###########################################

namespace = ATLAILL

#Pentapox: rash fever cough
character_event = { 
	id = ATLAILL.1
	
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0
					trait = rash
					trait = fever
					trait = cough
				}
				add_pentapox_symptom_effect = yes #Disease effect
			}
			50 = {
				modifier = {
					factor = 0
					NOR = {
						trait = rash
						trait = fever
						trait = cough
					}
				}
				character_event = { id = ATLAILL.2 days = 20 random = 20} # Disease develops
			}
		}
	}
}

#Pentapox: rash fever cough
character_event = {
	id = ATLAILL.2
	desc = ATLAILLDESC.2
	picture = GFX_evt_night_earthkingdom
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = has_pentapox
		set_character_flag = manifest_pentapox
		add_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_pentapox
		if = {
			limit = {
				trait = fever
			}
			remove_trait = fever
		}
		if = {
			limit = {
				trait = rash
			}
			remove_trait = rash
		}
		if = {
			limit = {
				trait = cough
			}
			remove_trait = cough
		}
		hidden_tooltip = {
			if = {
				limit = {
					is_unimportant_trigger = yes
				}
				health = -2
			}
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			father = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			mother = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			spouse = {
				if = {
					limit = { ai = no }
					character_event = { id = RIP.5060 }
				}
			}
		}
	}
}

# Removing Pentapox
character_event = {
	id = ATLAILL.3
	desc = ATLAILLDESC.3
	picture = GFX_evt_night_earthkingdom
	border = GFX_event_normal_frame_religion
	is_sick = yes

	trigger = {
		trait = has_pentapox
		OR = {
			had_character_flag = { flag = manifest_pentapox days = 30 }
			NOT = { has_character_flag = manifest_pentapox }
		}
	}
	
	mean_time_to_happen = {
		months = 5
		
		modifier = {
			factor = 0.75
			base_health = 5.1
		}
		modifier = {
			factor = 0.5
			base_health = 6.0
		}
		modifier = {
			factor = 0.5
			base_health = 7.0
		}
		modifier = {
			factor = 1.5
			NOT = { base_health = 5.0 }
		}
		modifier = {
			factor = 2.0
			NOT = { base_health = 4.1 }
		}
		modifier = {
			factor = 0.66
			NOT = { age = 20 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 30 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 40 }
		}
		modifier = {
			factor = 2.0
			age = 50
		}
		modifier = {
			factor = 2.0
			age = 70
		}
		modifier = {
			factor = 2.0
			is_ill = yes
		}
		modifier = {
			factor = 4.0
			trait = infirm
		}
		modifier = {
			factor = 5.0
			trait = incapable
		}
	}

	option = {
		name = ATLAILLOPT.3
		remove_trait = has_pentapox
		clear_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_pentapox
		clr_character_flag = manifest_pentapox
		set_character_flag = immune_pentapox
		hidden_tooltip = {
			remove_treatment_modifiers_effect = yes
		}
	}
}

character_event = { # Fever can lead to Pentapox
	id = ATLAILL.4
	desc = EVTDESCRIP.5001
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = fever
		hidden_tooltip = {
			host = { # Ping Doctor
				random_courtier_or_vassal = {
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_pentapox }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_pentapox
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_pentapox 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_pentapox 
						}
						character_event = { id = ATLAILL.1 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_verminbite }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_verminbite
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_verminbite 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_verminbite 
						}
						character_event = { id = ATLAILL.21 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_takun_cough }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_takun_cough
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_takun_cough 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_takun_cough 
						}
						character_event = { id = ATLAILL.7 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_scorch_blight }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_scorch_blight
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_scorch_blight 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_scorch_blight 
						}
						character_event = { id = ATLAILL.17 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_black_frost }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_black_frost
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_black_frost 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_black_frost 
						}
						character_event = { id = ATLAILL.12 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_ashbreath }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_ashbreath
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
					set_character_flag = got_ashbreath 
					set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_ashbreath 
						}
						character_event = { id = ATLAILL.25 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						has_character_flag = developing_illness
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = disease_not_serious 
						random_list = {
							100 = {
								character_event = { id = RIP.11008 days = 10 random = 30 }
							}
							100 = {
								character_event = { id = RIP.11008 days = 90 random = 45 }
							}
							100 = {
								character_event = { id = RIP.11008 days = 365 random = 120 }
							}
						}
					} 
				}
			}
		}
	}
}

character_event = { # Cough
	id = ATLAILL.5
	desc = EVTDESCRIP.5000
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = cough
		
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_pentapox }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_pentapox
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
					set_character_flag = got_pentapox 
					set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_pentapox 
						}
					character_event = { id = ATLAILL.1 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_takun_cough }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_takun_cough
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
					set_character_flag = got_takun_cough 
					set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_takun_cough 
						}
						character_event = { id = ATLAILL.7 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_ashbreath }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_ashbreath
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
					set_character_flag = got_ashbreath 
					set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_ashbreath 
						}
						character_event = { id = ATLAILL.25 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
							has_character_flag = developing_illness
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = disease_not_serious
						random_list = {
							100 = {
								character_event = { id = RIP.11002 days = 10 random = 30 }
							}
							100 = {
								character_event = { id = RIP.11002 days = 90 random = 30 }
							}
							100 = {
								character_event = { id = RIP.11002 days = 700 random = 100 }
							}
						}
					} 
				}
			}
		}
	}
}

character_event = { #rash
	id = ATLAILL.6
	desc = EVTDESCRIP.5007
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = rash
		
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_pentapox }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_pentapox
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_pentapox
						set_character_flag = developing_illness
						}
					if = {
						limit = {
							has_character_flag = got_pentapox 
						}
						character_event = { id = ATLAILL.1 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_black_frost }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_black_frost
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_black_frost 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_black_frost 
						}
						character_event = { id = ATLAILL.12 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_scorch_blight }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_scorch_blight
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_scorch_blight 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_scorch_blight 
						}
						character_event = { id = ATLAILL.17 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						has_character_flag = developing_illness
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = disease_not_serious 
						random_list = {
							100 = {
							character_event = { id = RIP.11008 days = 10 random = 30 }
							}
							100 = {
							character_event = { id = RIP.11008 days = 90 random = 45 }
							}
							100 = {
							character_event = { id = RIP.11008 days = 365 random = 120 }
							}
						}
					} 
				}
			}
		}
	}
}

#Takun Cough: cough chest_pain fever fatigue
character_event = { 
	id = ATLAILL.7
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0
					num_of_symptoms = 3
				}
				add_takun_cough_symptom_effect = yes #Disease effect
			}
			50 = {
				modifier = {
					factor = 0
					NOR = {
						trait = cough
						trait = chest_pain
						trait = fever
						trait = fatigue
					}
				}
				character_event = { id = ATLAILL.8 days = 20 random = 20 } #Disease develops
			}
		}
	}
}

#Takun Cough: cough chest_pain fever fatigue
character_event = { 
	id = ATLAILL.8
	desc = ATLAILLDESC.8
	picture = GFX_evt_night_earthkingdom
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = has_takuan_cough
		set_character_flag = manifest_takuan_cough
		add_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_takun_cough
		if = {
			limit = {
				trait = fever
			}
			remove_trait = fever
		}
		if = {
			limit = {
				trait = cough
			}
			remove_trait = cough
		}
		if = {
			limit = {
				trait = chest_pain
			}
			remove_trait = chest_pain
		}
		if = {
			limit = {
				trait = fatigue
			}
			remove_trait = fatigue
		}
		hidden_tooltip = {
			if = {
				limit = {
					is_unimportant_trigger = yes
				}
				health = -3
			}
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			father = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			mother = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			spouse = {
				if = {
					limit = { ai = no }
					character_event = { id = RIP.5060 }
				}
			}
		}
	}
}

# Removing Takuan Cough
character_event = {
	id = ATLAILL.9
	desc = ATLAILLDESC.9
	picture = GFX_evt_night_earthkingdom
	border = GFX_event_normal_frame_religion
	is_sick = yes

	trigger = { 
		trait = has_takuan_cough
		OR = {
			had_character_flag = { flag = manifest_takuan_cough days = 60 }
			NOT = { has_character_flag = manifest_takuan_cough }
		}
	}
	
	mean_time_to_happen = {
		months = 24
		
		modifier = {
			factor = 0.75
			base_health = 5.1
		}
		modifier = {
			factor = 0.5
			base_health = 6.0
		}
		modifier = {
			factor = 0.5
			base_health = 7.0
		}
		modifier = {
			factor = 1.5
			NOT = { base_health = 5.0 }
		}
		modifier = {
			factor = 2.0
			NOT = { base_health = 4.1 }
		}
		modifier = {
			factor = 0.66
			NOT = { age = 20 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 30 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 40 }
		}
		modifier = {
			factor = 2.0
			age = 50
		}
		modifier = {
			factor = 2.0
			age = 70
		}
		modifier = {
			factor = 2.0
			is_ill = yes
		}
		modifier = {
			factor = 4.0
			trait = infirm
		}
		modifier = {
			factor = 5.0
			trait = incapable
		}
	}

	option = {
		name = ATLAILLOPT.9
		remove_trait = has_takuan_cough
		clear_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_takun_cough
		clr_character_flag = manifest_takuan_cough
		set_character_flag = immune_takun_cough
		hidden_tooltip = {
			remove_treatment_modifiers_effect = yes
		}
	}
}

character_event = { #chest_pain
	id = ATLAILL.10
	desc = EVTDESCRIP.5005
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = chest_pain
		
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_takun_cough }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_takun_cough
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
					set_character_flag = got_takun_cough 
					set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_takun_cough 
						}
						character_event = { id = ATLAILL.7 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_ashbreath }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_ashbreath
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
					set_character_flag = got_ashbreath 
					set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_ashbreath 
						}
						character_event = { id = ATLAILL.25 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						has_character_flag = developing_illness
					}
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						random_list = { #chest pains can last a long time
							100 = {
								character_event = { id = RIP.11006 days = 1725 random = 200 }
							}
							100 = {
								character_event = { id = RIP.11006 days = 3650 random = 365 }
							}
							100 = {
								modifier = {
									factor = 3
									age = 50 
								}
								character_event = { id = RIP.11006 days = 7300 random = 3650 }
							}
							100 = {
								modifier = {
									factor = 5
									NOT = { age = 30 }
								}
								character_event = { id = RIP.11006 days = 30 random = 60 }
								set_character_flag = disease_not_serious #only protected from other illness if this is a short term effect
							}
						}
					} 
				}
			}
		}
	}
}

character_event = { #fatigue
	id = ATLAILL.11
	desc = EVTDESCRIP.5009
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = fatigue
		
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_takun_cough }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_takun_cough
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
					set_character_flag = got_takun_cough 
					set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_takun_cough 
						}
						character_event = { id = ATLAILL.7 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_black_frost }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_black_frost
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_black_frost 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_black_frost 
						}
						character_event = { id = ATLAILL.12 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
							has_character_flag = developing_illness					
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = disease_not_serious 
						random_list = {
							100 = {
								character_event = { id = RIP.11011 days = 10 random = 30 }
							}
							100 = {
								character_event = { id = RIP.11011 days = 90 random = 45 }
							}
							100 = {
								character_event = { id = RIP.11011 days = 180 random = 60 }
							}
						}
					} 
				}
			}
		}
	}
}

#Black Frost: fever headache rash fatigue abdominal_pain
character_event = { 
	id = ATLAILL.12
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0
					num_of_symptoms = 3
				}
				add_black_frost_symptom_effect = yes #Disease effect
			}
			50 = {
				modifier = {
					factor = 0
					NOR = {
						trait = fever
						trait = headache
						trait = rash
						trait = fatigue
						trait = abdominal_pain
					}
				}
				character_event = { id = ATLAILL.13 days = 20 random = 20} #Disease develops
			}
		}
	}
}

character_event = { # Black Frost
	id = ATLAILL.13
	desc = ATLAILLDESC.13
	picture = GFX_evt_night_earthkingdom
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = has_black_frost
		set_character_flag = manifest_black_frost
		add_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_black_frost
		if = {
			limit = {
				trait = fever
			}
			remove_trait = fever
		}
		if = {
			limit = {
				trait = rash
			}
			remove_trait = rash
		}
		if = {
			limit = {
				trait = abdominal_pain
			}
			remove_trait = abdominal_pain
		}
		if = {
			limit = {
				trait = fatigue
			}
			remove_trait = fatigue
		}
		if = {
			limit = {
				trait = headache
			}
			remove_trait = headache
		}
		hidden_tooltip = {
			if = {
				limit = {
					is_unimportant_trigger = yes
				}
				health = -3
			}
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			father = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			mother = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			spouse = {
				if = {
					limit = { ai = no }
					character_event = { id = RIP.5060 }
				}
			}
		}
	}
}
# Removing Black Frost
character_event = {
	id = ATLAILL.14
	picture = GFX_evt_recovery
	desc = ATLAILLDESC.14
	border = GFX_event_normal_frame_religion
	is_sick = yes

	trigger = { 
		trait = has_black_frost
		OR = {
			had_character_flag = { flag = manifest_black_frost days = 60 }
			NOT = { has_character_flag = manifest_black_frost }
		}
	}
	
	mean_time_to_happen = {
		months = 12
		
		modifier = {
			factor = 0.75
			base_health = 5.1
		}
		modifier = {
			factor = 0.5
			base_health = 6.0
		}
		modifier = {
			factor = 0.5
			base_health = 7.0
		}
		modifier = {
			factor = 1.5
			NOT = { base_health = 5.0 }
		}
		modifier = {
			factor = 2.0
			NOT = { base_health = 4.1 }
		}
		modifier = {
			factor = 0.66
			NOT = { age = 20 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 30 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 40 }
		}
		modifier = {
			factor = 2.0
			age = 50
		}
		modifier = {
			factor = 2.0
			age = 70
		}
		modifier = {
			factor = 2.0
			is_ill = yes
		}
		modifier = {
			factor = 4.0
			trait = infirm
		}
		modifier = {
			factor = 5.0
			trait = incapable
		}
	}

	option = {
		name = ATLAILLOPT.14
		remove_trait = has_black_frost
		clear_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_black_frost
		clr_character_flag = manifest_black_frost
		set_character_flag = immune_black_frost
		hidden_tooltip = {
			remove_treatment_modifiers_effect = yes
		}
	}
}

character_event = { #abdominal_pain can lead to typhoid_fever typhus flu dysentery cancer
	id = ATLAILL.15
	desc = EVTDESCRIP.5008
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = abdominal_pain
		
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_black_frost }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_black_frost
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_black_frost 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_black_frost 
						}
						character_event = { id = ATLAILL.12 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						has_character_flag = developing_illness
					}
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = disease_not_serious 
						random_list = {
							100 = {
								character_event = { id = RIP.11010 days = 10 random = 30 }
							}
							100 = {
								character_event = { id = RIP.11010 days = 90 random = 45 }
							}
							100 = {
								character_event = { id = RIP.11010 days = 180 random = 60 }
							}
						}
					} 
				}
			}
		}
	}
}

character_event = { #headache can lead to syphilis typhus smallpox aztec_disease flu cancer
	id = ATLAILL.16
	desc = EVTDESCRIP.5004
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = headache
		
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_black_frost }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_black_frost
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_black_frost 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_black_frost 
						}
						character_event = { id = ATLAILL.12 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_scorch_blight }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_scorch_blight
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_scorch_blight 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_scorch_blight 
						}
						character_event = { id = ATLAILL.17 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						has_character_flag = developing_illness
					}
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = disease_not_serious 
						random_list = {
							100 = {
								character_event = { id = RIP.11009 days = 10 random = 30 }
							}
							100 = {
								character_event = { id = RIP.11009 days = 90 random = 45 }
							}
							100 = {
								character_event = { id = RIP.11009 days = 700 random = 100 }
							}
						}
					} 
				}
			}
		}
	}
}

#Scorch Blight: malaise fever headache rash
character_event = {
	id = ATLAILL.17
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0
					num_of_symptoms = 3
				}
				add_scorch_blight_symptom_effect = yes #Disease effect
			}
			50 = {
				modifier = {
					factor = 0
					NOR = {
						trait = malaise
						trait = fever
						trait = headache
						trait = rash
					}
				}
				character_event = { id = ATLAILL.18 days = 20 random = 20} #Disease develops
			}
		}
	}
}

#Scorch Blight: malaise fever headache rash
character_event = {
	id = ATLAILL.18
	desc = ATLAILLDESC.18
	picture = GFX_evt_night_earthkingdom
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = has_scorch_blight
		set_character_flag = manifest_scorch_blight
		add_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_scorch_blight
		if = {
			limit = {
				trait = fever
			}
			remove_trait = fever
		}
		if = {
			limit = {
				trait = rash
			}
			remove_trait = rash
		}
		if = {
			limit = {
				trait = malaise
			}
			remove_trait = malaise
		}
		if = {
			limit = {
				trait = headache
			}
			remove_trait = headache
		}
		hidden_tooltip = { 
			if = {
				limit = {
					is_unimportant_trigger = yes
				}
				health = -3
			}
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			father = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			mother = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			spouse = {
				if = {
					limit = { ai = no }
					character_event = { id = RIP.5060 }
				}
			}
		}
	}
}

# Removing Scorch Blight
character_event = {
	id = ATLAILL.19
	picture = GFX_evt_recovery
	desc = ATLAILLDESC.19
	border = GFX_event_normal_frame_religion
	is_sick = yes

	trigger = { 
		trait = has_scorch_blight
		OR = {
			had_character_flag = { flag = manifest_scorch_blight days = 30 }
			NOT = { has_character_flag = manifest_scorch_blight }
		}
	}
	
	mean_time_to_happen = {
		months = 5
		
		modifier = {
			factor = 0.75
			base_health = 5.1
		}
		modifier = {
			factor = 0.5
			base_health = 6.0
		}
		modifier = {
			factor = 0.5
			base_health = 7.0
		}
		modifier = {
			factor = 1.5
			NOT = { base_health = 5.0 }
		}
		modifier = {
			factor = 2.0
			NOT = { base_health = 4.1 }
		}
		modifier = {
			factor = 0.66
			NOT = { age = 20 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 30 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 40 }
		}
		modifier = {
			factor = 2.0
			age = 50
		}
		modifier = {
			factor = 2.0
			age = 70
		}
		modifier = {
			factor = 2.0
			is_ill = yes
		}
		modifier = {
			factor = 4.0
			trait = infirm
		}
		modifier = {
			factor = 5.0
			trait = incapable
		}
	}

	option = {
		name = ATLAILLOPT.19
		remove_trait = has_scorch_blight
		if = {
			limit = {
				NOT = { trait = scarred }
			}
			add_trait = scarred
		}
		clear_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_scorch_blight
		clr_character_flag = manifest_scorch_blight
		set_character_flag = immune_scorch_blight
		hidden_tooltip = {
			remove_treatment_modifiers_effect = yes
		}
	}
}

character_event = { #malaise
	id = ATLAILL.20
	desc = EVTDESCRIP.5010
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = malaise
		
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_scorch_blight }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_scorch_blight
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_scorch_blight 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_scorch_blight 
						}
						character_event = { id = ATLAILL.17 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_verminbite }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_verminbite
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_verminbite 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_verminbite 
						}
						character_event = { id = ATLAILL.21 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						has_character_flag = developing_illness
					}
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = disease_not_serious 
						random_list = {
							100 = {
								character_event = { id = RIP.11012 days = 10 random = 30 }
							}
							100 = {
								character_event = { id = RIP.11012 days = 90 random = 45 }
							}
							100 = {
								character_event = { id = RIP.11012 days = 180 random = 60 }
							}
						}
					}
				}
			}
		}
	}
}

#Verminbite: malaise fever cramps
character_event = { 
	id = ATLAILL.21
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0
					trait = malaise
					trait = fever
					trait = cramps
				}
				add_verminbite_symptom_effect = yes
			}
			50 = {
				modifier = {
					factor = 0
					NOR = {
						trait = malaise
						trait = fever
						trait = cramps
					}
				}
				character_event = { id = ATLAILL.22 }
			}
		}
	}
}

#Verminbite: fever cramps malaise
character_event = {
	id = ATLAILL.22
	desc = ATLAILLDESC.22
	picture = GFX_evt_night_earthkingdom
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = has_verminbite
		set_character_flag = manifest_verminbite
		add_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_verminbite
		if = {
			limit = {
				trait = fever
			}
			remove_trait = fever
		}
		if = {
			limit = {
				trait = cramps
			}
			remove_trait = cramps
		}
		if = {
			limit = {
				trait = malaise
			}
			remove_trait = malaise
		}
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			father = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			mother = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			spouse = {
				if = {
					limit = { ai = no }
					character_event = { id = RIP.5060 }
				}
			}	
		}
	}
}

# Removing Verminbite
character_event = {
	id = ATLAILL.23
	desc = ATLAILLDESC.23
	picture = GFX_evt_recovery
	border = GFX_event_normal_frame_religion
	is_sick = yes

	trigger = { 
		trait = has_verminbite
		OR = {
			had_character_flag = { flag = manifest_verminbite days = 30 }
			NOT = { has_character_flag = manifest_verminbite }
		}
	}
	
	mean_time_to_happen = {
		months = 3
		modifier = {
			factor = 0.75
			base_health = 5.1
		}
		modifier = {
			factor = 0.5
			base_health = 6.0
		}
		modifier = {
			factor = 0.5
			base_health = 7.0
		}
		modifier = {
			factor = 1.5
			NOT = { base_health = 5.0 }
		}
		modifier = {
			factor = 2.0
			NOT = { base_health = 4.1 }
		}
		modifier = {
			factor = 0.66
			NOT = { age = 20 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 30 }
		}
		modifier = {
			factor = 0.75
			NOT = { age = 40 }
		}
		modifier = {
			factor = 2.0
			age = 50
		}
		modifier = {
			factor = 2.0
			age = 70
		}
		modifier = {
			factor = 2.0
			is_ill = yes
		}
		modifier = {
			factor = 4.0
			trait = infirm
		}
		modifier = {
			factor = 5.0
			trait = incapable
		}
	}

	option = {
		name = ATLAILLOPT.23
		remove_trait = has_verminbite
		clear_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_verminbite
		clr_character_flag = manifest_verminbite
		set_character_flag = immune_verminbite
		hidden_tooltip = {
			remove_treatment_modifiers_effect = yes
		}
	}
}

character_event = { #cramps
	id = ATLAILL.24
	desc = EVTDESCRIP.5006
	picture = GFX_evt_illness
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = cramps
		
		hidden_tooltip = {
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			random_list = {
				100 = {
					modifier = {
						factor = 0 
						OR = {
							AND = {
								NOT = { has_character_flag = got_verminbite }
								has_character_flag = developing_illness
							}
							has_character_flag = disease_not_serious
						}
					}
					modifier = {
						factor = 0.01	#rare when not an epidemic 			
					}
					modifier = {
						factor = 0
						has_character_flag = immune_verminbite
					}
				
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = got_verminbite 
						set_character_flag = developing_illness
					}
					if = {
						limit = {
							has_character_flag = got_verminbite 
						}
						character_event = { id = ATLAILL.21 days = 14 random = 14 }
					}
				}
				100 = {
					modifier = {
						factor = 0 
						has_character_flag = developing_illness
					}
					if = {
						limit = {
							NOR = {
								has_character_flag = developing_illness
								has_character_flag = disease_not_serious
							}
						}
						set_character_flag = disease_not_serious 
						character_event = { id = RIP.11007 days = 10 random = 30 }
					} 
				}
			}
		}
	}
}

#Ashbreath: cough chest_pain fever
character_event = { 
	id = ATLAILL.25
	hide_window = yes
	is_triggered_only = yes
	
	immediate = {
		random_list = {
			100 = {
				modifier = {
					factor = 0
					trait = cough
					trait = fever
					trait = chest_pain
				}
				add_ashbreath_symptom_effect = yes #Disease effect
			}
			50 = {
				modifier = {
					factor = 0
					NOR = {
						trait = cough
						trait = chest_pain
						trait = fever
					}
				}
				character_event = { id = ATLAILL.26 days = 20 random = 20} #Disease develops
			}
		}
	}
}

#Ashbreath: cough chest pain fever
character_event = { 
	id = ATLAILL.26
	desc = ATLAILLDESC.26
	picture = GFX_evt_night_earthkingdom
	border = GFX_event_normal_frame_religion
	
	is_triggered_only = yes
	
	option = {
		name = ALAS
		add_trait = has_ashbreath
		set_character_flag = manifest_ashbreath
		add_disease_level_effect = yes

		if = {
			limit = {
				trait = fever
			}
			remove_trait = fever
		}
		if = {
			limit = {
				trait = cough
			}
			remove_trait = cough
		}
		if = {
			limit = {
				trait = chest_pain
			}
			remove_trait = chest_pain
		}
		hidden_tooltip = {
			if = {
				limit = {
					is_unimportant_trigger = yes
				}
				health = -3
			}
			host = {
				random_courtier_or_vassal = { #Markus doing
					limit = {
						liege = { character = PREVPREV }
						has_minor_title = title_court_physician
					}
					character_event = { id = RIP.11031 days = 1 }
				}
			}
			father = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			mother = {
				if = {
					limit = { 
						ai = no 
						is_liege_of = ROOT
					}
					character_event = { id = RIP.5060 }
				}
			}
			spouse = {
				if = {
					limit = { ai = no }
					character_event = { id = RIP.5060 }
				}
			}
			clr_character_flag = developing_illness
			clr_character_flag = got_ashbreath 
		}
	}
}

# Removing Ashbreath
character_event = {
	id = ATLAILL.27
	picture = GFX_evt_recovery
	desc = ATLAILLDESC.27
	border = GFX_event_normal_frame_religion
	is_sick = yes

	trigger = {
		base_health = 4
		trait = has_ashbreath
		OR = {
			had_character_flag = { flag = manifest_ashbreath days = 30 }
			NOT = { has_character_flag = manifest_ashbreath }
		}
	}
	
	mean_time_to_happen = {
		months = 96
		modifier = {
			factor = 2.0
			NOT = { base_health = 5 }
		}
		modifier = {
			factor = 2.0
			NOT = { base_health = 4 }
		}
		modifier = {
			factor = 1.5
			trait = depressed
		}
		modifier = {
			factor = 1.5
			trait = stressed
		}
		modifier = {
			factor = 0.5
			base_health = 6
		}
		modifier = {
			factor = 0.5
			base_health = 7
		}
		modifier = {
			factor = 0.5
			base_health = 8
		}
	}

	option = {
		name = ATLAILLOPT.27
		remove_trait = has_ashbreath
		clear_disease_level_effect = yes
		clr_character_flag = developing_illness
		clr_character_flag = got_ashbreath
		clr_character_flag = manifest_ashbreath
		hidden_tooltip = {
			remove_treatment_modifiers_effect = yes
		}
	}
}

# Waterbending Treatment
character_event = {
	id = ATLAILL.28
	picture = GFX_evt_recovery
	border = GFX_event_normal_frame_religion
	is_triggered_only = yes
	desc = {
		text = ATLAILL_28_GREAT_DESC
		trigger = {
			has_character_flag = good_treatment_outcome
		}
	}
	desc = {
		text = ATLAILL_28_POOR_DESC
		trigger = {
			has_character_flag = bad_treatment_outcome
		}
	}
	
	option = { #good outcome
		name = ATLAILLOPTA.28
		trigger = {
			has_character_flag = good_treatment_outcome
		}
		custom_tooltip = { text = CURED_RIP_TOOLTIP }
		
		hidden_tooltip = {
			if = { limit = { trait = flu } remove_trait = flu }
			if = { limit = { trait = dysentery } remove_trait = dysentery }
			if = { limit = { trait = gout }	remove_trait = gout }
			if = { limit = { trait = food_poisoning } remove_trait = food_poisoning }
			if = { limit = { trait = rabies } remove_trait = rabies }
			if = { limit = { trait = cancer } remove_trait = cancer }
			if = { limit = { trait = pneumonic } remove_trait = pneumonic }
			if = { limit = { trait = syphilitic } remove_trait = syphilitic set_character_flag = immune_syphilis }       
			if = { limit = { trait = has_tuberculosis } remove_trait = has_tuberculosis set_character_flag = immune_tuberculosis }
			if = { limit = { trait = has_typhoid_fever } remove_trait = has_typhoid_fever set_character_flag = immune_typhoid_fever}
			if = { limit = { trait = has_typhus } remove_trait = has_typhus set_character_flag = immune_typhus}
			if = { limit = { trait = has_bubonic_plague ai = yes } remove_trait = has_bubonic_plague set_character_flag = immune_bubonic_plague}
			if = { limit = { trait = has_bubonic_plague ai = no } remove_trait = has_bubonic_plague set_character_flag = immune_bubonic_plague set_character_flag = achievement_i_got_better}
			if = { limit = { trait = has_measles } remove_trait = has_measles set_character_flag = immune_measles}
			if = { limit = { trait = has_small_pox } remove_trait = has_small_pox set_character_flag = immune_smallpox }
			if = { limit = { trait = has_pentapox } remove_trait = has_pentapox set_character_flag = immune_pentapox }
			if = { limit = { trait = has_takuan_cough } remove_trait = has_takuan_cough set_character_flag = immune_takun_cough }
			if = { limit = { trait = has_black_frost } remove_trait = has_black_frost set_character_flag = immune_black_frost }
			if = { limit = { trait = has_scorch_blight } remove_trait = has_scorch_blight set_character_flag = immune_scorch_blight }
			if = { limit = { trait = has_verminbite } remove_trait = has_verminbite set_character_flag = immune_verminbite }
			if = { limit = { trait = has_ashbreath } remove_trait = has_small_pox set_character_flag = immune_ashbreath }
			remove_treatment_modifiers_effect = yes
			clear_disease_level_effect = yes
			remove_disease_flags_effect = yes
			set_character_flag = seen_the_light_of_modern_medicine
		}
		
		if = {
			limit = {
				host = {
					NOT = { character = ROOT }
					OR = {
						AND = {
							is_married = yes
							any_spouse = { character = ROOT }
						}
						is_child_of = ROOT
						is_father = ROOT
						is_mother = ROOT
						is_lover = ROOT
						sibling = ROOT
					}
				}
			}
			host = { 
				character_event = { id = RIP.11061 }
				if = {
					limit = {
						FROMFROM = {
							NOT = {
								trait = physician
							}
						}
					}
					random = {
						chance = 10
						character_event = { id = RIP.11065 } 
					}
				}
			}
		}
		clr_character_flag = good_treatment_outcome
		clr_character_flag = being_treated
		set_character_flag = recent_treatment
	}
	
	option = { #bad outcome
		name = ATLAILLOPTB.28
		trigger = {
			has_character_flag = bad_treatment_outcome
		}
		add_character_modifier = {
			name = successful_treatment_2
			duration = 730
		}
		clr_character_flag = bad_treatment_outcome
		clr_character_flag = being_treated
		set_character_flag = recent_treatment
	}
}